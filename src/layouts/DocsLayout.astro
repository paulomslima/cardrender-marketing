---
import BaseLayout from "./BaseLayout.astro";
import { FileText, BookOpen, Users, Palette, BarChart3, Code, Shield } from "lucide-astro";
import { getLangFromUrl, getLocalizedPath, useTranslations } from "../lib/i18n";
import { createSlugger } from "../lib/slugger";

const { title, description, jsonLd, headings = [] } = Astro.props;

const tocTree = buildToc(headings);

const pages = [
  { label: "Getting Started", path: "/docs/getting-started", icon: FileText },
  { label: "Teams & Roles", path: "/docs/teams", icon: Users },
  { label: "Branding & Templates", path: "/docs/branding-and-templates", icon: Palette },
  { label: "Analytics", path: "/docs/analytics", icon: BarChart3 },
  { label: "Public API", path: "/docs/api", icon: Code },
  { label: "Security", path: "/docs/security", icon: Shield },
];

const currentLang = getLangFromUrl(Astro.url);
const t = useTranslations(currentLang);

function buildToc(headings) {
  const slugger = createSlugger();
  const normalized = headings.map((heading) => ({
    depth: heading.depth,
    text: heading.text ?? "",
    slug: slugger(heading.text ?? ""),
  }));

  const tree = [];
  let currentSection = null;

  normalized.forEach((heading) => {
    if (heading.depth === 2) {
      currentSection = { ...heading, children: [] };
      tree.push(currentSection);
      return;
    }

    if (heading.depth === 3) {
      const child = { ...heading, children: [] };
      if (currentSection) {
        currentSection.children.push(child);
      } else {
        tree.push(child);
      }
    }
  });

  return tree;
}
---

<BaseLayout title={title} description={description} jsonLd={jsonLd}>
  <div class="docs-hero">
    <div class="container">
      <div class="docs-breadcrumb">
        <a href={getLocalizedPath('/', currentLang)}>{t('nav.home')}</a>
        <span>/</span>
        <a href={getLocalizedPath('/docs', currentLang)}>{t('nav.docs')}</a>
      </div>
    </div>
  </div>
  
  <section class="docs-section">
    <div class="container docs-container docs-layout">
      <aside class="docs-sidebar">
        <div class="docs-nav-header">
          <BookOpen size={20} />
          <h3>Documentation</h3>
        </div>
        <nav class="docs-nav">
          {pages.map((page) => {
            const Icon = page.icon;
            const localizedHref = getLocalizedPath(page.path, currentLang);
            const isActive = Astro.url.pathname === localizedHref;
            return (
              <a class={isActive ? "active" : ""} href={localizedHref}>
                <Icon size={18} />
                <span>{page.label}</span>
              </a>
            );
          })}
        </nav>
      </aside>
      
      <article class="docs-content">
        <div class="docs-prose" id="docs-content">
          <slot />
        </div>
      </article>
      
      <aside class={`docs-toc${tocTree.length === 0 ? ' hidden' : ''}`}>
        <div class="toc-header">
          <h4>Table of contents</h4>
        </div>
        <nav class="toc-nav" id="toc-nav" aria-label="Table of contents">
          <ul class="toc-list" id="toc-list">
            {tocTree.map((node) => (
              <li class="toc-item">
                <a
                  class="toc-link"
                  href={`#${node.slug}`}
                  data-heading={node.slug}
                  aria-current="false"
                >
                  {node.text}
                </a>
                {node.children && node.children.length > 0 && (
                  <ul class="toc-sublist">
                    {node.children.map((child) => (
                      <li class="toc-subitem">
                        <a
                          class="toc-link toc-link-nested"
                          href={`#${child.slug}`}
                          data-heading={child.slug}
                          aria-current="false"
                        >
                          {child.text}
                        </a>
                      </li>
                    ))}
                  </ul>
                )}
              </li>
            ))}
          </ul>
        </nav>
      </aside>
    </div>
  </section>
</BaseLayout>

<script>
  let tocObserver = null;

  function initTOC() {
    if (tocObserver) {
      tocObserver.disconnect();
      tocObserver = null;
    }

    const content = document.getElementById('docs-content');
    const tocList = document.getElementById('toc-list');
    const tocContainer = document.querySelector('.docs-toc');

    if (!content || !tocList || !tocContainer) return;

    const headings = Array.from(content.querySelectorAll('h2, h3'));
    const hasServerToc = tocList.querySelector('a[data-heading]');

    if (headings.length === 0) {
      tocContainer.classList.add('hidden');
      return;
    }

    tocContainer.classList.remove('hidden');

    if (!hasServerToc) {
      const tree = buildHeadingTree(headings);
      renderTOC(tree, tocList);
    }

    const firstLink = tocList.querySelector('.toc-link');
    setActiveLink(tocList, firstLink);
    tocObserver = setupScrollSpy(headings, tocList);
  }

  function buildHeadingTree(headings) {
    const tree = [];
    let currentSection = null;
    const slugCounts = new Map();

    const slugify = (value) => {
      const base = (value ?? '')
        .toString()
        .toLowerCase()
        .trim()
        .normalize('NFKD')
        .replace(/[\u0300-\u036f]/g, '')
        .replace(/[^a-z0-9\s-]/g, '')
        .replace(/\s+/g, '-')
        .replace(/-+/g, '-')
        .replace(/^-+|-+$/g, '');

      return base || 'section';
    };

    const uniqueSlug = (value, fallback) => {
      const base = slugify(value) || fallback;
      const count = slugCounts.get(base) ?? 0;
      slugCounts.set(base, count + 1);
      return count === 0 ? base : `${base}-${count + 1}`;
    };

    headings.forEach((heading, index) => {
      if (!heading.id) {
        heading.id = uniqueSlug(heading.textContent, `section-${index}`);
      }

      const entry = {
        id: heading.id,
        text: heading.textContent?.trim() || `Section ${index + 1}`,
        level: Number(heading.tagName.slice(1))
      };

      if (entry.level === 2) {
        currentSection = { ...entry, children: [] };
        tree.push(currentSection);
      } else if (entry.level === 3) {
        const childEntry = { id: entry.id, text: entry.text, level: entry.level };
        if (currentSection) {
          currentSection.children.push(childEntry);
        } else {
          tree.push({ ...childEntry, children: [] });
        }
      }
    });

    return tree;
  }

  function renderTOC(tree, tocList) {
    tocList.innerHTML = '';
    const fragment = document.createDocumentFragment();

    tree.forEach((node) => {
      const item = document.createElement('li');
      item.className = 'toc-item';

      const link = createLink(node.id, node.text, 'toc-link');
      item.appendChild(link);

      if (node.children && node.children.length > 0) {
        const sublist = document.createElement('ul');
        sublist.className = 'toc-sublist';

        node.children.forEach((child) => {
          const subItem = document.createElement('li');
          subItem.className = 'toc-subitem';
          const childLink = createLink(child.id, child.text, 'toc-link toc-link-nested');
          subItem.appendChild(childLink);
          sublist.appendChild(subItem);
        });

        item.appendChild(sublist);
      }

      fragment.appendChild(item);
    });

    tocList.appendChild(fragment);

    const firstLink = tocList.querySelector('.toc-link');
    setActiveLink(tocList, firstLink);
  }

  function createLink(id, text, className) {
    const link = document.createElement('a');
    link.href = `#${id}`;
    link.textContent = text;
    link.className = className;
    link.dataset.heading = id;
    link.setAttribute('aria-current', 'false');
    return link;
  }

  function setActiveLink(tocList, target) {
    if (!target) return;
    tocList.querySelectorAll('.toc-link').forEach(anchor => {
      anchor.classList.remove('active');
      anchor.setAttribute('aria-current', 'false');
    });
    target.classList.add('active');
    target.setAttribute('aria-current', 'true');
  }

  function setupScrollSpy(headings, tocList) {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        const id = entry.target.getAttribute('id');
        const link = tocList.querySelector(`a[data-heading="${id}"]`);

        if (entry.isIntersecting && id && link) {
          setActiveLink(tocList, link);
        }
      });
    }, {
      rootMargin: '-100px 0px -70% 0px'
    });

    headings.forEach(heading => observer.observe(heading));

    if (!tocList.dataset.listenerAttached) {
      tocList.addEventListener('click', (event) => {
        const target = event.target;
        if (target instanceof HTMLElement && target.matches('a[data-heading]')) {
          event.preventDefault();
          const id = target.getAttribute('data-heading');
          const heading = id ? document.getElementById(id) : null;
          if (!heading) return;
          window.scrollTo({
            top: heading.getBoundingClientRect().top + window.scrollY - 80,
            behavior: 'smooth'
          });
          setActiveLink(tocList, target);
        }
      });
      tocList.dataset.listenerAttached = 'true';
    }

    return observer;
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initTOC);
  } else {
    initTOC();
  }

  document.addEventListener('astro:page-load', initTOC);
</script>

<style>
  .docs-hero {
    background: linear-gradient(135deg, hsl(var(--primary) / 0.05), hsl(var(--secondary) / 0.05));
    border-bottom: 1px solid hsl(var(--border));
    padding: 1.5rem 0;
  }
  
  .docs-breadcrumb {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: hsl(var(--muted-foreground));
  }
  
  .docs-breadcrumb a {
    color: hsl(var(--muted-foreground));
    transition: color 150ms;
  }
  
  .docs-breadcrumb a:hover {
    color: hsl(var(--primary));
  }
  
  .docs-section {
    padding: 2rem 0 4rem;
  }
  
  .docs-layout {
    display: grid;
    grid-template-columns: 220px 1fr 260px;
    gap: 3.5rem;
    align-items: start;
  }
  
  /* Sidebar Navigation */
  .docs-sidebar {
    position: sticky;
    top: 6rem;
    max-height: calc(100vh - 8rem);
    overflow-y: auto;
  }
  
  .docs-nav-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
  }
  
  .docs-nav-header h3 {
    margin: 0;
    font-size: 0.875rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: hsl(var(--muted-foreground));
  }
  
  .docs-nav {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }
  
  .docs-nav a {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.625rem 0.75rem;
    color: hsl(var(--muted-foreground));
    font-weight: 500;
    font-size: 0.875rem;
    border-radius: 8px;
    transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .docs-nav a:hover {
    background: hsl(var(--muted) / 0.1);
    color: hsl(var(--foreground));
  }
  
  .docs-nav a.active {
    background: hsl(var(--primary) / 0.1);
    color: hsl(var(--primary));
    font-weight: 600;
  }
  
  /* Main Content */
  .docs-content {
    padding: 0;
    min-height: 60vh;
  }

  :global(.docs-article) {
    display: block;
  }

  :global(.docs-article-header) {
    margin-bottom: 2.5rem;
  }

  :global(.docs-header) {
    display: flex;
    align-items: center;
    gap: 0.625rem;
    margin-bottom: 1.75rem;
  }

  :global(.docs-category-badge),
  :global(.docs-level-badge) {
    display: inline-flex;
    align-items: center;
    padding: 0.375rem 0.875rem;
    border-radius: 999px;
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.075em;
  }

  :global(.docs-category-badge) {
    background: hsl(var(--primary) / 0.12);
    color: hsl(var(--primary));
    border: 1px solid hsl(var(--primary) / 0.2);
  }

  :global(.docs-level-badge) {
    background: hsl(var(--muted) / 0.4);
    color: hsl(var(--muted-foreground));
    border: 1px solid hsl(var(--border));
  }

  :global(.docs-title) {
    font-size: 3rem;
    font-weight: 700;
    line-height: 1.15;
    margin: 0 0 1.5rem 0;
    color: hsl(var(--foreground));
    letter-spacing: -0.025em;
    max-width: 32ch;
    text-wrap: balance;
  }

  :global(.docs-description) {
    font-size: 1.1875rem;
    line-height: 1.65;
    color: hsl(var(--muted-foreground) / 0.95);
    margin: 0 0 1.25rem 0;
    font-weight: 400;
    max-width: 68ch;
  }

  :global(.docs-meta) {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8125rem;
    color: hsl(var(--muted-foreground) / 0.75);
    padding-bottom: 2rem;
    margin-bottom: 2.5rem;
    border-bottom: 1px solid hsl(var(--border) / 0.4);
    max-width: 68ch;
  }

  :global(.docs-meta-label) {
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-weight: 600;
    font-size: 0.6875rem;
  }

  /* Ensure list markers render inside docs content */
  .docs-content :global(ul),
  .docs-content :global(ol) {
    margin: 1.125rem 0;
    padding-left: 1.75rem;
    list-style-position: outside;
  }

  .docs-content :global(ul) {
    list-style: disc;
  }

  .docs-content :global(ol) {
    list-style: decimal;
  }

  .docs-content :global(li) {
    margin: 0.5rem 0;
  }

  .docs-content :global(li::marker) {
    color: hsl(var(--primary));
    font-weight: 700;
  }
  
  /* Table of Contents - shadcn-style */
  .docs-toc {
    position: sticky;
    top: 6rem;
    max-height: calc(100vh - 7rem);
    overflow-y: auto;
    background: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    border-radius: 14px;
    padding: 0.9rem 0.9rem 1.1rem;
    box-shadow: 0 10px 28px hsl(var(--foreground) / 0.05);
    transition: opacity 150ms ease;
    font-size: 13px;
  }
  
  .docs-toc.hidden {
    display: none;
  }
  
  .toc-header {
    margin-bottom: 1rem;
    padding-bottom: 0.875rem;
    border-bottom: 1px solid hsl(var(--border));
  }
  
  .toc-header h4 {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: hsl(var(--muted-foreground));
    margin: 0;
  }
  
  .toc-nav {
    margin-top: 0.5rem;
  }
  
  .toc-list {
    list-style: none;
    margin: 0;
    padding: 0 0 0 0.85rem;
    position: relative;
  }
  
  .toc-list::before {
    content: '';
    position: absolute;
    top: 0.5rem;
    bottom: 0.5rem;
    left: 0.35rem;
    width: 2px;
    background: linear-gradient(180deg, hsl(var(--border)), transparent 85%);
    border-radius: 2px;
  }
  
  .toc-item {
    margin: 0.1rem 0;
    padding: 0.3rem;
  }
  
  .toc-link {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.32rem 0.5rem 0.32rem 0.5rem;
    color: hsl(var(--muted-foreground));
    font-size: inherit;
    font-weight: 500;
    border-radius: 0.5rem;
    position: relative;
    transition: color 150ms ease, background 150ms ease;
    text-decoration: none;
  }
  
  .toc-link::before {
    content: '';
    width: 0.42rem;
    height: 0.42rem;
    border-radius: 999px;
    border: 2px solid hsl(var(--border));
    background: hsl(var(--card));
    flex-shrink: 0;
    box-shadow: 0 0 0 4px hsl(var(--card));
  }
  
  .toc-link:hover {
    color: hsl(var(--foreground));
    background: hsl(var(--muted) / 0.12);
  }
  
  .toc-link.active {
    color: hsl(var(--secondary)) !important;
    background: hsl(var(--secondary) / 0.22) !important;
    font-weight: 700;
    box-shadow: inset 0 0 0 1px hsl(var(--secondary) / 0.35);
  }
  
  .toc-link.active::before {
    border-color: hsl(var(--secondary)) !important;
    background: hsl(var(--secondary)) !important;
    box-shadow: 0 0 0 4px hsl(var(--secondary) / 0.3) !important;
  }
  
  .toc-sublist {
    list-style: none;
    margin: 0.15rem 0 0.45rem 1rem;
    padding: 0.15rem 0 0 0.7rem;
    border-left: 1px dashed hsl(var(--border));
  }
  
  .toc-subitem {
    margin: 0;
    padding: 0;
  }
  
  .toc-link-nested {
    font-size: 12px !important;
    padding-left: 0.35rem;
  }
  
  .toc-link-nested::before {
    width: 0.4rem;
    height: 0.4rem;
    border-width: 1px;
  }
  
  /* Responsive */
  @media (max-width: 1280px) {
    .docs-layout {
      grid-template-columns: 200px 1fr;
      gap: 2.5rem;
    }
    
    .docs-toc {
      display: none;
    }
  }
  
  @media (max-width: 900px) {
    .docs-layout {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    
    .docs-sidebar {
      position: static;
      max-height: none;
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: 12px;
      padding: 1.25rem;
    }
    
    .docs-content {
      padding: 0;
    }
  }
  
  @media (max-width: 640px) {
    .docs-hero {
      padding: 1rem 0;
    }
    
    .docs-section {
      padding: 1.5rem 0 3rem;
    }
    
    .docs-sidebar {
      padding: 1rem;
      border-radius: 8px;
    }
  }

  /* Shared docs content styles moved from english docs page to apply to all locales */
  :global(.docs-prose) {
    color: hsl(var(--foreground) / 0.9);
    font-size: 1rem;
    line-height: 1.7;
    max-width: 72ch;
  }

  :global(.docs-prose h2) {
    font-size: 1.875rem;
    font-weight: 600;
    margin-top: 3.5rem;
    margin-bottom: 1.25rem;
    padding-top: 1.25rem;
    border-top: 1px solid hsl(var(--border) / 0.4);
    scroll-margin-top: 6rem;
    letter-spacing: -0.015em;
    color: hsl(var(--foreground));
  }

  :global(.docs-prose h2:first-child) {
    margin-top: 0;
    border-top: none;
    padding-top: 0;
  }

  :global(.docs-prose h3) {
    font-size: 1.375rem;
    font-weight: 600;
    margin-top: 2.25rem;
    margin-bottom: 0.875rem;
    scroll-margin-top: 6rem;
    letter-spacing: -0.01em;
    color: hsl(var(--foreground));
  }

  :global(.docs-prose h4) {
    font-size: 1.125rem;
    font-weight: 600;
    margin-top: 1.875rem;
    margin-bottom: 0.625rem;
    scroll-margin-top: 6rem;
    color: hsl(var(--foreground));
  }
  
  :global(.docs-prose p) {
    margin: 1.125rem 0;
    line-height: 1.7;
    color: hsl(var(--foreground) / 0.88);
  }

  :global(.docs-prose p:first-of-type) {
    font-size: 1.0625rem;
    color: hsl(var(--foreground) / 0.82);
    line-height: 1.65;
    margin-top: 0;
  }
  
  :global(.docs-prose ul),
  :global(.docs-prose ol) {
    margin: 1.125rem 0;
    padding-left: 1.625rem;
  }

  :global(.docs-prose li) {
    margin: 0.5rem 0;
    line-height: 1.65;
    color: hsl(var(--foreground) / 0.88);
  }

  :global(.docs-prose li::marker) {
    color: hsl(var(--muted-foreground) / 0.65);
    font-weight: 600;
  }

  :global(.docs-prose li > ul),
  :global(.docs-prose li > ol) {
    margin: 0.375rem 0;
  }

  :global(.docs-prose ul > li) {
    padding-left: 0.25rem;
  }

  :global(.docs-prose strong) {
    font-weight: 600;
    color: hsl(var(--foreground));
  }

  :global(.docs-prose code) {
    background: hsl(var(--muted) / 0.35);
    padding: 0.1875rem 0.4375rem;
    border-radius: 0.3125rem;
    font-size: 0.875em;
    font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
    color: hsl(var(--foreground) / 0.95);
    font-weight: 500;
    border: 1px solid hsl(var(--border) / 0.3);
  }

  :global(.docs-prose pre) {
    background: hsl(var(--muted) / 0.2);
    border: 1px solid hsl(var(--border) / 0.35);
    border-radius: 0.5rem;
    padding: 1.25rem 1.5rem;
    margin: 1.5rem 0;
    overflow-x: auto;
    line-height: 1.5;
    box-shadow: 0 1px 3px hsl(var(--foreground) / 0.05);
  }

  :global(.docs-prose pre code) {
    background: none;
    padding: 0;
    border-radius: 0;
    border: none;
    font-size: 0.875rem;
    color: hsl(var(--foreground) / 0.92);
    font-weight: 400;
    letter-spacing: 0;
  }

  :global(.docs-prose blockquote) {
    border-left: 3px solid hsl(var(--primary) / 0.7);
    margin: 1.5rem 0;
    font-style: normal;
    color: hsl(var(--foreground) / 0.85);
    background: hsl(var(--primary) / 0.06);
    padding: 1rem 1.375rem;
    border-radius: 0.375rem;
    font-size: 0.9375rem;
  }

  :global(.docs-prose blockquote p) {
    margin: 0.5rem 0;
  }

  :global(.docs-prose blockquote p:first-child) {
    margin-top: 0;
    font-size: 0.9375rem;
  }

  :global(.docs-prose blockquote p:last-child) {
    margin-bottom: 0;
  }

  :global(.docs-prose blockquote strong) {
    color: hsl(var(--primary));
    font-weight: 600;
  }

  :global(.docs-prose a) {
    color: hsl(var(--primary));
    text-decoration: none;
    border-bottom: 1px solid hsl(var(--primary) / 0.35);
    transition: all 150ms ease;
    font-weight: 500;
  }

  :global(.docs-prose a:hover) {
    border-bottom-color: hsl(var(--primary));
    color: hsl(var(--primary));
  }

  :global(.docs-prose a:active) {
    color: hsl(var(--primary) / 0.85);
  }

  :global(.docs-prose table) {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    margin: 1.75rem 0;
    font-size: 0.9375rem;
    border: 1px solid hsl(var(--border) / 0.4);
    border-radius: 0.5rem;
    overflow: hidden;
  }

  :global(.docs-prose thead) {
    background: hsl(var(--muted) / 0.25);
  }

  :global(.docs-prose th) {
    text-align: left;
    padding: 0.875rem 1rem;
    border-bottom: 1px solid hsl(var(--border) / 0.5);
    font-weight: 600;
    font-size: 0.8125rem;
    color: hsl(var(--foreground));
    text-transform: uppercase;
    letter-spacing: 0.025em;
  }

  :global(.docs-prose td) {
    padding: 0.875rem 1rem;
    border-bottom: 1px solid hsl(var(--border) / 0.3);
    color: hsl(var(--foreground) / 0.88);
    line-height: 1.6;
  }

  :global(.docs-prose tbody tr:last-child td) {
    border-bottom: none;
  }

  :global(.docs-prose tbody tr:hover) {
    background: hsl(var(--muted) / 0.08);
  }

  :global(.docs-prose hr) {
    border: none;
    border-top: 1px solid hsl(var(--border) / 0.4);
    margin: 2.5rem 0;
  }
  
  .docs-related {
    margin-top: 4rem;
    padding-top: 3rem;
    border-top: 1px solid hsl(var(--border) / 0.5);
  }
  
  .docs-related-title {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 1.5rem;
    color: hsl(var(--foreground));
  }
  
  .docs-related-grid {
    display: grid;
    gap: 1rem;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  }
  
  .docs-related-card {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.25rem 1.5rem;
    background: hsl(var(--card));
    border: 1px solid hsl(var(--border) / 0.5);
    border-radius: 12px;
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
    text-decoration: none;
  }
  
  .docs-related-card:hover {
    background: hsl(var(--card));
    border-color: hsl(var(--primary));
    transform: translateY(-2px);
    box-shadow: 0 8px 24px hsl(var(--primary) / 0.12);
  }
  
  .docs-related-icon {
    font-size: 1.5rem;
    color: hsl(var(--primary));
    transition: transform 200ms;
    flex-shrink: 0;
  }
  
  .docs-related-card:hover .docs-related-icon {
    transform: translateX(4px);
  }
  
  .docs-related-text {
    font-weight: 500;
    color: hsl(var(--foreground));
    font-size: 0.9375rem;
  }
  
  @media (max-width: 640px) {
    :global(.docs-title) {
      font-size: 2rem;
      letter-spacing: -0.02em;
      max-width: none;
      text-wrap: pretty;
    }
    
    :global(.docs-description) {
      font-size: 1rem;
      max-width: none;
    }

    :global(.docs-meta) {
      max-width: none;
      flex-wrap: wrap;
    }
    
    :global(.docs-prose) {
      font-size: 0.9375rem;
    }
    
    :global(.docs-prose h2) {
      font-size: 1.5rem;
      margin-top: 2.5rem;
    }
    
    :global(.docs-prose h3) {
      font-size: 1.25rem;
      margin-top: 1.875rem;
    }
    
    .docs-related-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
